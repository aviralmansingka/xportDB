<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
  <title>xportDB</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>

  <!-- VEX -->
<script src="js/vex.combined.min.js"></script>
<script>vex.defaultOptions.className = 'vex-theme-wireframe'</script>
<link rel="stylesheet" href="css/vex.css" />
<link rel="stylesheet" href="css/vex-theme-wireframe.css" />
  
  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  <script type="text/javascript">

    var schemas = [];    
    var flds = [];

    var field = {name: "blah", type: "string"};
    flds.push(field);
    function fields(fld_name, fld_type) {
        var field = {name: fld_name, type: fld_type};
        flds.push(field);
    }

    schemas.push(flds);

    function addField(field) {

        vex.dialog.open({
          message: 'Enter a name for your field',
          input: '<input name="fieldname" type="text" placeholder="Field Name" required />',
        buttons: [
          $.extend({}, vex.dialog.buttons.YES, { text: 'Done' }),
          $.extend({}, vex.dialog.buttons.NO, { text: 'Back' })
        ],
        callback: function (data) {
          if (!data) {
            console.log('Cancelled')
         } else {

            console.log('Field name: ', data.fieldname);
            li = document.createElement("li");
            li.setAttribute("class", "collection-item");
            var sp = document.createElement("span");
            sp.setAttribute("class", "badge");
            var text1 = document.createTextNode(data.fieldname);
            var text2 = document.createTextNode(field);
            fields("name",field);

            li.appendChild(text1);
            sp.appendChild(text2);
            li.appendChild(sp);
            document.getElementById("list").appendChild(li);
            
          }
      }
    })

        // li = document.createElement("li");
        // li.setAttribute("class", "collection-item");
        // var sp = document.createElement("span");
        // sp.setAttribute("class", "badge");
        // var text1 = document.createTextNode("name" + '\t');

        // var text2 = document.createTextNode(field);
        // fields("name",field);

        // li.appendChild(text1);
        // sp.appendChild(text2);
        // li.appendChild(sp);
        // document.getElementById("list").appendChild(li);
    }

    function addTable() {

        var schema_fields = [];

        vex.dialog.open({
          message: 'Enter a name for your model',
          input: '<input name="classname" type="text" placeholder="Model Name" required />',
        buttons: [
          $.extend({}, vex.dialog.buttons.YES, { text: 'Done' }),
          $.extend({}, vex.dialog.buttons.NO, { text: 'Back' })
        ],
        callback: function (data) {
          if (!data) {
            console.log('Cancelled')
         } else {
            console.log('Class name: ', data.classname)
            var schema = {title: "data.classname", fields:schema_fields};
            schemas.push(schema);
            showContents(data.classname);
          }
      }
})

        // var schema_fields = [];
        // var schema = {title: "data.classname", fields:schema_fields};
        // schemas.push(schema);

        // showContents(title);

    }

    function showContents(title) {
      console.log("In fucntion: ", title);
      document.getElementById("contents").innerHTML = "";

      var ul = document.createElement("ul");
      ul.setAttribute("id", "list");
      ul.setAttribute("class", "collection with-header");

        var li = document.createElement("li");
        li.setAttribute("class", "collection-header");
        var h4 = document.createElement("h4");
        var text1 = document.createTextNode(title + '\t');
        h4.appendChild(text1);
        li.appendChild(h4);
        ul.appendChild(li);

      
      document.getElementById("contents").appendChild(ul);
      
    }

  </script>
 


</head>

<body>
  <nav class="black white-text" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="#" class="brand-logo"><img src="media/xportDB.png" width="40%"></a>
      <ul class="right hide-on-med-and-down">
        <li><a class="waves-effect waves-light btn" href="#">Generate</a></li>
        <li><a class="waves-effect waves-light btn" href="#">Logout</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a class="waves-effect waves-light btn" href="#">Generate</a></li>
        <li><a class="waves-effect waves-light btn" href="#">Logout</a></li>
      </ul>

      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  
  <div class="fixed-action-btn">
    <a class="btn-floating btn-large green">
      <i class="large material-icons">mode_edit</i>
    </a>
    <ul>
      <li><a class="btn-floating red" onclick="addTable()"><i class="material-icons">library_add</i></a></li>
      <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
    </ul>
  </div>

  <div class="row center">
    <br>
    <a class="waves-effect waves-light btn" href="#" onclick="addField('String')">String</a>
    <a class="waves-effect waves-light btn" href="#" onclick="addField('Number')">Number</a>
    <a class="waves-effect waves-light btn" href="#" onclick="addField('Many to One')">Many to One</a>
  </div>
  <div class="row container">
  <div id="contents">
  </div>
  </div>

  
  </body>
</html>
